<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gestion des Promotions</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../assets/css/style.css" />
    <!-- Fixed path -->
    <style>
      .promo-card {
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        background: white;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s;
      }
      .promo-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }
      .status-badge {
        position: absolute;
        top: 10px;
        right: 10px;
      }
      .action-buttons {
        display: flex;
        gap: 10px;
      }
    </style>
  </head>
  <body class="bg-light">
    <div class="container py-5">
      <h1 class="text-center mb-5">Gestion de mes Codes Promo</h1>

      <!-- Formulaire de création -->
      <div class="card mb-5 shadow-sm">
        <div class="card-header bg-primary text-white">
          <h2 class="h5 mb-0">Créer un nouveau code promo</h2>
        </div>
        <div class="card-body">
          <form
            id="createPromoForm"
            class="row g-3"
            data-edit-mode="false"
            data-promo-id=""
          >
            <div class="col-md-6">
              <label for="code" class="form-label">Code Promo</label>
              <input type="text" class="form-control" id="code" required />
            </div>
            <div class="col-md-6">
              <label for="nom_promo" class="form-label"
                >Nom de la promotion</label
              >
              <input type="text" class="form-control" id="nom_promo" required />
            </div>
            <div class="col-md-12">
              <label for="description" class="form-label">Description</label>
              <textarea
                class="form-control"
                id="description"
                required
              ></textarea>
            </div>
            <div class="col-md-6">
              <label for="date_debut" class="form-label">Date de début</label>
              <input
                type="date"
                class="form-control"
                id="date_debut"
                required
              />
            </div>
            <div class="col-md-6">
              <label for="date_fin" class="form-label">Date de fin</label>
              <input type="date" class="form-control" id="date_fin" required />
            </div>
            <div class="col-md-6">
              <label for="reduction_value" class="form-label"
                >Valeur de la réduction</label
              >
              <input
                type="number"
                class="form-control"
                id="reduction_value"
                required
              />
            </div>
            <div class="col-md-6">
              <label for="type_reduction" class="form-label"
                >Type de réduction</label
              >
              <select class="form-select" id="type_reduction" required>
                <option value="pourcentage">Pourcentage</option>
                <option value="montant">Montant fixe</option>
                <option value="livraison gratuite">Livraison gratuite</option>
              </select>
            </div>
            <div class="col-md-6">
              <label for="condition_min" class="form-label"
                >Montant minimum d'achat</label
              >
              <input type="number" class="form-control" id="condition_min" />
            </div>
            <div class="col-md-6" id="montantMaxContainer">
              <label for="montant_max" class="form-label"
                >Réduction maximale</label
              >
              <input
                type="number"
                class="form-control"
                id="montant_max"
                step="0.01"
              />
              <small class="text-muted"
                >Non applicable pour montant fixe et livraison gratuite</small
              >
            </div>
            <div class="col-12">
              <button type="submit" class="btn btn-primary">
                Créer la promotion
              </button>
              <button
                type="button"
                class="btn btn-secondary"
                onclick="resetForm()"
                style="display: none"
              >
                Annuler
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Liste des promos existantes -->
      <h2 class="h4 mb-4">Mes codes promo actifs</h2>
      <div class="row" id="promoList">
        <!-- Exemple de promo 1 -->
        <div class="col-md-6 mb-4">
          <div class="promo-card position-relative">
            <span class="status-badge badge bg-success">Actif</span>
            <h3 class="h5">SUMMER2024</h3>
            <p class="text-muted">
              Réduction d'été - 20% sur tous les articles
            </p>
            <div class="row mb-3">
              <div class="col-4">
                <small class="text-muted">Valeur: 20%</small>
              </div>
              <div class="col-4">
                <small class="text-muted">Min. achat: 50€</small>
              </div>
              <div class="col-4">
                <small class="text-muted">Utilisations: 45</small>
              </div>
            </div>
            <div class="action-buttons">
              <button
                class="btn btn-sm btn-warning"
                onclick="editPromo('SUMMER2024')"
              >
                <i class="fas fa-edit"></i> Modifier
              </button>
              <button
                class="btn btn-sm btn-danger"
                onclick="deletePromo('SUMMER2024')"
              >
                <i class="fas fa-trash"></i> Supprimer
              </button>
              <button
                class="btn btn-sm btn-success"
                onclick="togglePromo('SUMMER2024')"
              >
                <i class="fas fa-power-off"></i> Désactiver
              </button>
            </div>
          </div>
        </div>

        <!-- Exemple de promo 2 -->
        <div class="col-md-6 mb-4">
          <div class="promo-card position-relative">
            <span class="status-badge badge bg-danger">Inactif</span>
            <h3 class="h5">WINTER2023</h3>
            <p class="text-muted">Promotion hiver - 15€ de réduction</p>
            <div class="row mb-3">
              <div class="col-4">
                <small class="text-muted">Valeur: 15€ fixe</small>
              </div>
              <div class="col-4">
                <small class="text-muted">Min. achat: 100€</small>
              </div>
              <div class="col-4">
                <small class="text-muted">Utilisations: 127</small>
              </div>
            </div>
            <div class="action-buttons">
              <button
                class="btn btn-sm btn-warning"
                onclick="editPromo('WINTER2023')"
              >
                <i class="fas fa-edit"></i> Modifier
              </button>
              <button
                class="btn btn-sm btn-danger"
                onclick="deletePromo('WINTER2023')"
              >
                <i class="fas fa-trash"></i> Supprimer
              </button>
              <button
                class="btn btn-sm btn-secondary"
                onclick="togglePromo('WINTER2023')"
              >
                <i class="fas fa-power-off"></i> Activer
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/scipt/user_promo.js"></script>
  </body>
</html>
